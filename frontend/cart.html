<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shopping Cart - OnLiNE ELECTRONICS</title>
    <meta name="description" content="Review your shopping cart at OnLiNE ELECTRONICS. Update quantities, remove items, or proceed to checkout.">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/cart.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <a href="index.html">OnLiNE ELECTRONICS</a>
                </div>
                <nav class="main-nav">
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="products.html">Products</a></li>
                        <li><a href="about.html">About</a></li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul>
                </nav>
                <div class="header-actions">
                    <a href="cart.html" class="cart-btn active" aria-label="Shopping Cart">
                        <i class="fas fa-shopping-cart"></i>
                        <span class="cart-count">0</span>
                    </a>
                    <button id="theme-toggle" class="theme-toggle-btn" aria-label="Toggle Theme">
                        <i class="fas fa-moon"></i>
                    </button>
                    <button class="mobile-menu-btn" aria-label="Menu">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Cart Page -->
    <main class="cart-page">
        <div class="container">
            <h1 class="page-title">Shopping Cart</h1>
            
            <div id="cartContent" style="display: none;">
                <!-- Cart with items will be shown here dynamically -->
                <div class="cart-container">
                    <div class="cart-items">
                        <div class="cart-header">
                            <div>Product</div>
                            <div></div>
                            <div>Price</div>
                            <div>Quantity</div>
                            <div>Subtotal</div>
                            <div></div>
                        </div>
                        <div id="cartItemsContainer">
                            <!-- Cart items will be loaded dynamically -->
                        </div>
                    </div>
                    
                    <div class="cart-summary">
                        <h2 class="summary-title">Order Summary</h2>
                        
                        <div class="summary-row">
                            <span>Subtotal</span>
                            <span id="cartSubtotal">$0.00</span>
                        </div>
                        
                        <div class="summary-row">
                            <span>Shipping</span>
                            <span>Free</span>
                        </div>
                        
                        <div class="summary-row">
                            <span>Tax</span>
                            <span id="cartTax">$0.00</span>
                        </div>
                        
                        <div class="summary-row total">
                            <span>Total</span>
                            <span id="cartTotal">$0.00</span>
                        </div>
                        
                        <button class="checkout-btn">Confirm Order</button>
                        
                        <div class="coupon-form">
                            <input type="text" class="coupon-input" placeholder="Coupon code">
                            <button class="coupon-btn">Apply</button>
                        </div>
                        
                        <a href="products.html" class="continue-shopping">
                            <i class="fas fa-arrow-left"></i> Continue Shopping
                        </a>
                    </div>
                </div>
            </div>
            
            <!-- Empty Cart State (shown by default) -->
            <div id="emptyCart">
                <div class="empty-cart">
                    <div class="empty-cart-icon">
                        <i class="fas fa-shopping-cart"></i>
                    </div>
                    <h2>Your cart is empty</h2>
                    <p>Looks like you haven't added anything to your cart yet. Start shopping to find something you'll love!</p>
                    <a href="products.html" class="btn-primary">
                        <i class="fas fa-shopping-bag"></i> Shop Now
                    </a>
                </div>
            </div>
            
            <!-- Order Success Modal -->
            <div id="orderSuccessModal" class="order-success-modal" style="display: none;">
                <div class="order-success-content">
                    <div class="success-animation">
                        <div class="success-icon">
                            <i class="fas fa-check"></i>
                        </div>
                        <div class="success-text">
                            <h2>Order Confirmed!</h2>
                            <p>Thank you for your order. Your items will be processed and shipped soon.</p>
                        </div>
                    </div>
                    <div class="order-summary-modal">
                        <h3>Order Summary</h3>
                        <div class="order-items-modal" id="orderItemsModal">
                            <!-- Order items will be populated here -->
                        </div>
                        <div class="order-totals-modal">
                            <div class="total-row-modal">
                                <span>Total</span>
                                <span id="orderTotalModal">$0.00</span>
                            </div>
                        </div>
                    </div>
                    <div class="success-actions">
                        <a href="products.html" class="btn btn-primary">Continue Shopping</a>
                        <a href="order-tracking.html" class="btn btn-outline">Track Order</a>
                    </div>
                </div>
            </div>

    <!-- Newsletter -->
    <section class="newsletter">
        <div class="container">
            <div class="newsletter-content">
                <h3>Subscribe to Our Newsletter</h3>
                <p>Stay updated with our latest products and offers</p>
                <form class="newsletter-form">
                    <input type="email" placeholder="Enter your email" required>
                    <button type="submit" class="btn">Subscribe</button>
                </form>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-col">
                    <h4>OnLiNE ELECTRONICS</h4>
                    <p>Your one-stop shop for all electronic gadgets and accessories.</p>
                    <div class="social-links">
                        <a href="#" aria-label="Facebook"><i class="fab fa-facebook"></i></a>
                        <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                        <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
                <div class="footer-col">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="about.html">About Us</a></li>
                        <li><a href="faq.html">FAQs</a></li>
                        <li><a href="privacy.html">Privacy Policy</a></li>
                        <li><a href="terms.html">Terms & Conditions</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Customer Service</h4>
                    <ul>
                        <li><a href="shipping-info.html">Shipping Info</a></li>
                        <li><a href="faq.html">FAQ</a></li>
                        <li><a href="order-tracking.html">Order Tracking</a></li>
                        <li><a href="contact.html">Contact Support</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>Contact Info</h4>
                    <ul class="contact-info">
{{ ... }}
                        <li><i class="fas fa-map-marker-alt"></i> 4 Killo, Addis Ababa, Ethiopia 94025</li>
                        <li><i class="fas fa-phone"></i> +251 987 7612</li>
                        <li><i class="fas fa-envelope"></i> info@OnLiNE ELECTRONICS.com</li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 OnLiNE ELECTRONICS. All rights reserved.</p>
                <div class="payment-methods">
                    <i class="fab fa-cc-visa"></i>
                    <i class="fab fa-cc-mastercard"></i>
                    <i class="fab fa-cc-paypal"></i>
                    <i class="fab fa-apple-pay"></i>
                </div>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="js/main.js" type="module"></script>
    <script src="js/theme.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Load cart items from localStorage
            loadCartItems();
            
            // Quantity selectors
            document.querySelectorAll('.quantity-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const input = this.parentElement.querySelector('.quantity-input');
                    let value = parseInt(input.value);
                    
                    if (this.classList.contains('plus') && value < 10) {
                        input.value = value + 1;
                    } else if (this.classList.contains('minus') && value > 1) {
                        input.value = value - 1;
                    }
                    
                    updateCartTotals();
                });
            });
            
            // Quantity input validation
            document.querySelectorAll('.quantity-input').forEach(input => {
                input.addEventListener('change', function() {
                    let value = parseInt(this.value);
                    
                    if (isNaN(value) || value < 1) {
                        this.value = 1;
                    } else if (value > 10) {
                        this.value = 10;
                    }
                    
                    updateCartTotals();
                });
            });
            
            // Remove item
            document.querySelectorAll('.remove-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const item = this.closest('.cart-item');
                    item.style.animation = 'fadeOut 0.3s ease-out';
                    
                    setTimeout(() => {
                        item.remove();
                        updateCartTotals();
                        checkEmptyCart();
                    }, 300);
                });
            });
            
            // Update cart totals
            function updateCartTotals() {
                let subtotal = 0;
                
                document.querySelectorAll('.cart-item').forEach(item => {
                    const price = parseFloat(item.querySelector('.current-price').textContent.replace('$', '').replace(',', ''));
                    const quantity = parseInt(item.querySelector('.quantity-input').value);
                    const itemSubtotal = price * quantity;
                    
                    item.querySelector('.subtotal-amount').textContent = `$${itemSubtotal.toFixed(2)}`;
                    subtotal += itemSubtotal;
                });
                
                const tax = subtotal * 0.08; // 8% tax rate
                const total = subtotal + tax;
                
                document.getElementById('cartSubtotal').textContent = `$${subtotal.toFixed(2)}`;
                document.getElementById('cartTax').textContent = `$${tax.toFixed(2)}`;
                document.getElementById('cartTotal').textContent = `$${total.toFixed(2)}`;
                
                // Update cart count in header
                const itemCount = document.querySelectorAll('.cart-item').length;
                document.querySelector('.cart-count').textContent = itemCount;
                
                // Hide/show cart count badge
                const cartCount = document.querySelector('.cart-count');
                if (itemCount > 0) {
                    cartCount.style.display = 'flex';
                } else {
                    cartCount.style.display = 'none';
                }
            }
            
            // Check if cart is empty
            function checkEmptyCart() {
                const cartItems = document.querySelectorAll('.cart-item');
                const cartContent = document.getElementById('cartContent');
                const emptyCart = document.getElementById('emptyCart');
                
                if (cartItems.length === 0) {
                    cartContent.style.display = 'none';
                    emptyCart.style.display = 'block';
                } else {
                    cartContent.style.display = 'block';
                    emptyCart.style.display = 'none';
                }
            }
            
            // Apply coupon
            const couponForm = document.querySelector('.coupon-form');
            if (couponForm) {
                couponForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    const couponInput = this.querySelector('.coupon-input');
                    const couponCode = couponInput.value.trim();
                    
                    if (couponCode === '') {
                        alert('Please enter a coupon code');
                        return;
                    }
                    
                    // In a real app, you would validate the coupon with the server
                    alert('Coupon applied successfully!');
                    couponInput.value = '';
                });
            }
            
            // Confirm Order button
            const confirmOrderBtn = document.querySelector('.checkout-btn');
            if (confirmOrderBtn) {
                confirmOrderBtn.addEventListener('click', function() {
                    // Get cart items and total
                    const cart = JSON.parse(localStorage.getItem('cart')) || [];
                    if (cart.length === 0) {
                        alert('Your cart is empty!');
                        return;
                    }

                    // Generate order number
                    const orderNumber = 'TECH-' + new Date().getFullYear() + '-' + Math.floor(Math.random() * 100000).toString().padStart(5, '0');

                    // Populate order modal
                    populateOrderModal(cart, orderNumber);

                    // Show success modal
                    document.getElementById('orderSuccessModal').style.display = 'flex';

                    // Clear cart after successful order
                    localStorage.removeItem('cart');
                    loadCartItems(); // This will show empty cart
                });
            }

            // Function to populate order modal with cart items
            function populateOrderModal(cart, orderNumber) {
                const orderItemsContainer = document.getElementById('orderItemsModal');
                const orderTotalElement = document.getElementById('orderTotalModal');

                // Calculate total
                let total = 0;
                const orderItemsHTML = cart.map(item => {
                    const itemTotal = parseFloat(item.price) * item.quantity;
                    total += itemTotal;

                    return `
                        <div class="order-item-modal">
                            <img src="${item.image || 'https://via.placeholder.com/50x50?text=' + encodeURIComponent(item.name)}" alt="${item.name}">
                            <div class="order-item-modal-details">
                                <div class="order-item-modal-title">${item.name}</div>
                                <div class="order-item-modal-variant">Quantity: ${item.quantity}</div>
                                <div class="order-item-modal-price">$${itemTotal.toFixed(2)}</div>
                            </div>
                        </div>
                    `;
                }).join('');

                orderItemsContainer.innerHTML = orderItemsHTML;
                orderTotalElement.textContent = `$${total.toFixed(2)}`;

                // Update order number in modal (you could add this element if needed)
                // document.getElementById('orderNumberModal').textContent = orderNumber;
            }
            
            // Load cart items from localStorage
            function loadCartItems() {
                const cart = JSON.parse(localStorage.getItem('cart')) || [];
                const cartItemsContainer = document.getElementById('cartItemsContainer');
                const cartContent = document.getElementById('cartContent');
                const emptyCart = document.getElementById('emptyCart');
                
                if (cart.length === 0) {
                    cartContent.style.display = 'none';
                    emptyCart.style.display = 'block';
                    return;
                }
                
                cartContent.style.display = 'block';
                emptyCart.style.display = 'none';
                
                const cartHTML = cart.map(item => `
                    <div class="cart-item" data-id="${item.id}">
                        <img src="${item.image || 'https://via.placeholder.com/300x300?text=' + encodeURIComponent(item.name)}" alt="${item.name}" class="product-image">
                        <div class="product-details">
                            <h3 class="product-title">${item.name}</h3>
                            <div class="product-variant">Product ID: ${item.id}</div>
                        </div>
                        <div class="product-price">
                            <span class="current-price">$${parseFloat(item.price).toFixed(2)}</span>
                        </div>
                        <div class="quantity-selector">
                            <button class="quantity-btn minus">-</button>
                            <input type="number" class="quantity-input" value="${item.quantity}" min="1" max="10">
                            <button class="quantity-btn plus">+</button>
                        </div>
                        <div class="subtotal">
                            <span class="subtotal-label">Subtotal:</span>
                            <span class="subtotal-amount">$${(parseFloat(item.price) * item.quantity).toFixed(2)}</span>
                        </div>
                        <button class="remove-btn" title="Remove item" data-id="${item.id}">
                            <i class="far fa-trash-alt"></i>
                        </button>
                    </div>
                `).join('');
                
                cartItemsContainer.innerHTML = cartHTML;
                
                // Re-attach event listeners
                attachCartEventListeners();
                updateCartTotals();
            }
            
            function attachCartEventListeners() {
                // Quantity selectors
                document.querySelectorAll('.quantity-btn').forEach(button => {
                    button.addEventListener('click', function() {
                        const input = this.parentElement.querySelector('.quantity-input');
                        let value = parseInt(input.value);
                        const cartItem = this.closest('.cart-item');
                        const productId = parseInt(cartItem.dataset.id);
                        
                        if (this.classList.contains('plus') && value < 10) {
                            input.value = value + 1;
                        } else if (this.classList.contains('minus') && value > 1) {
                            input.value = value - 1;
                        }
                        
                        updateCartItemQuantity(productId, parseInt(input.value));
                        updateCartTotals();
                    });
                });
                
                // Quantity input validation
                document.querySelectorAll('.quantity-input').forEach(input => {
                    input.addEventListener('change', function() {
                        let value = parseInt(this.value);
                        const cartItem = this.closest('.cart-item');
                        const productId = parseInt(cartItem.dataset.id);
                        
                        if (isNaN(value) || value < 1) {
                            this.value = 1;
                            value = 1;
                        } else if (value > 10) {
                            this.value = 10;
                            value = 10;
                        }
                        
                        updateCartItemQuantity(productId, value);
                        updateCartTotals();
                    });
                });
                
                // Remove item
                document.querySelectorAll('.remove-btn').forEach(button => {
                    button.addEventListener('click', function() {
                        const productId = parseInt(this.dataset.id);
                        const item = this.closest('.cart-item');
                        item.style.animation = 'fadeOut 0.3s ease-out';
                        
                        setTimeout(() => {
                            removeFromCart(productId);
                            loadCartItems(); // Reload cart items
                        }, 300);
                    });
                });
            }
            
            function updateCartItemQuantity(productId, quantity) {
                let cart = JSON.parse(localStorage.getItem('cart')) || [];
                const itemIndex = cart.findIndex(item => item.id === productId);
                
                if (itemIndex !== -1) {
                    cart[itemIndex].quantity = quantity;
                    localStorage.setItem('cart', JSON.stringify(cart));
                }
            }
            
            function removeFromCart(productId) {
                let cart = JSON.parse(localStorage.getItem('cart')) || [];
                cart = cart.filter(item => item.id !== productId);
                localStorage.setItem('cart', JSON.stringify(cart));
                
                // Update cart count in header
                const totalItems = cart.reduce((total, item) => total + item.quantity, 0);
                const cartCountElement = document.querySelector('.cart-count');
                if (cartCountElement) {
                    cartCountElement.textContent = totalItems;
                    cartCountElement.style.display = totalItems > 0 ? 'flex' : 'none';
                }
            }

            // Initialize cart
            // updateCartTotals();
            // checkEmptyCart();
            
            // Add animation for cart items
            const cartItems = document.querySelectorAll('.cart-item');
            cartItems.forEach((item, index) => {
                item.style.animation = `fadeIn 0.3s ease-out ${index * 0.1}s forwards`;
                item.style.opacity = '0';
            });
            
            // Add CSS for animations
            const style = document.createElement('style');
            style.textContent = `
                @keyframes fadeIn {
                    from { opacity: 0; transform: translateY(10px); }
                    to { opacity: 1; transform: translateY(0); }
                }
                
                @keyframes fadeOut {
                    from { opacity: 1; transform: translateX(0); }
                    to { opacity: 0; transform: translateX(100%); }
                }
            `;
            document.head.appendChild(style);
        });
    </script>
</body>
</html>
